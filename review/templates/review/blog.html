{% extends "review/base.html" %}

{% block content %}
{% load starsz %}

<style>
  
  @import"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css";
  div.stars {
      text-align:centgeter;
      direction:rtl;
    }
    div.stars form {
      display:inline-block;
    }
    input.star {
      display: none;
    }
    label.star {
      display:inline-block;
      padding: 16px;
      font-size: 36px;
      color: rgba(218, 61, 61, 0.699);
      transition: all .2s;
    }
    input.star:checked ~ label.star:before {
      content: '★ ';
      color: rgb(255, 68, 68);
      transition: all .25s;
    }
    input.star-10:checked ~ label.star:before {
      color: rgb(248, 12, 79);
      text-shadow: 0 0 20px rgb(10, 10, 9);
    }
    input.star-1:checked ~ label.star:before {
      color: #F62;
    }
    label.star:hover {
      transform: rotate(-15deg) scale(1.3); 
    }
    label.star:before {
      content: '★ ';
      font-family: FontAwesome;
    }
  
      .landscape{
          left: 0%;
          right: 0%;
          object-fit: cover;
          /* position: absolute; */
      }
      .upper{
          margin-top: 4px;
          margin-bottom: 4px;
      }
      .title{
          text-align: center;
          height: 60px;
          color: white;
      }
      .rate{
          text-align: center;
          
          color: white;
      }
      .stars{
          height: 20px;
          
      }
      
      .btn{
          background-color: rgb(60, 60, 215);
          border-radius: 4px;
          color: white;
      }
      .show1{
          
          height:auto;
          
      }
      .txt1{
          display: flex;
          justify-content: center;
      }
      .comment{
          
          background-color:black;
          height: auto;
          margin-top: 10px;
          margin-left: 200px;
          margin-right: 200px;
          margin-bottom: 10px;
          width: auto;
          border: white 2px solid;
          border-radius: 6px;
          
      }
      .txt{
        color: white !important;
      }
      .h{
         text-align: center;
  
          margin-top: 3px;
      }
      .two{
          display: flex;
          justify-content: center;
      }
      .t1{
          margin-right: 175px;
          margin-top: 3px;
      }
      .t2{
          margin-left: 175px;
          margin-top: 3px;
      }
      .h{
          text-align: center;
          font-style: italic;
          color:rgb(2, 64, 2);
      }
      .two{
        display: flex;
        justify-content: center;
    }
    .t1{
        margin-right: 175px;
        margin-top: 3px;
    }
    .t2{
        margin-left: 175px;
        margin-top: 3px;
    }
    .h{
        text-align: center;
        font-style: italic;
        color:white;
        text-shadow: 2px 2px 4px wheat;
    }
    
    .star1 {
            font-size: 36px; /* Adjust the size as needed */
            color: gold; /* Change the color to your preferred color */
        }
        .stars2{
          height: 30px;
          margin-bottom: 20px;
          text-align: center;
        }
        .about-movie{
          display: flex;
          justify-content: center;
          height: auto;
        }
        .r{
          color: white;
          border: 2px solid rgb(239, 230, 230);
          margin: 15px;
          background-color: black;
          height: auto;
          box-shadow: 5px 5px 10px wheat;
          border-radius: 4px;
          padding: 10px;
          width: 25%;
        }
        .r1{
          width: 50% !important;
        }
        .genre1{
          text-align: center;
          margin-top: 20px;
          text-transform:uppercase;
          font-size: 20px;
          font-style: italic;
          text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);
        }
        
        .form-outline textarea {
    padding: 10px; /* Adjust the padding value as needed */
    border: solid 5px #3498db;
    border: solid pink 5px;
    margin-top: 50px;
   
    
    
    
    box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);
}

.rows{
  
  height: auto;
  padding-left: 15px;
  margin-top: 10px;
  margin-bottom: 10px;
  
}
.op{
  margin-top: 10px !important;
  margin-bottom: 10px !important;
}
@media (min-width: 500px) and (max-width: 768px)  {
  .text-area {
    display: block; /* Change to block-level element */
    margin-top: 10px; /* Add some margin to separate the text area from the stars */
  }
  .comment{
  text-align: centre;
  margin-left: 74px;
  height: 300px;
  width: 80%;
  
  
 }
 label.star {
  display: inline-block;
  padding: 9.8px;
  font-size: 18px;
  color: rgba(149, 184, 84, 0.699);
  transition: all .2s;
  margin-bottom: 1px; /* Add space below stars */
}
.star1{
  font-size: 18px;
}
}

 


@media (max-width: 414px) {
  /* Your styles for typical smartphones */
  .genre1{
    font-size: small;
  }
  .h{
    font-size: small;
  }
  .temp{
    font-size: large;
  }
  .star1{
    font-size: 10px;
  }
  .stars {
    width: 100%; /* Adjust the width as needed */
   /* Center the stars horizontally */
  text-align: center;
  
  }
  .form-control {
    width: 100%; /* Adjust as needed */
    height: 100px; /* Adjust as needed */
  }
  label.star {
  display: inline-block;
  padding: 6px;
  font-size: 10px;
  color: rgba(149, 184, 84, 0.699);
  transition: all .2s;
  margin-bottom: 1px; /* Add space below stars */
}
 .get-rating{
  display: flex;
  text-align: centre;
 }
 .comment{
  text-align: centre;
  margin-left: 74px;
  height: 300px;
  width: 63%;
  
  
 }
 


}

.avatar {
    width: 40px;
    height: 40px;
    background-color: #326f97; /* Background color for the circle */
    color: #fff; /* Text color inside the circle */
    display: flex;
    text-align: center;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    border-radius: 50%; /* Creates a circular shape */
    border: 1px solid rgb(1, 2, 20);
    margin-top: 5px;
    padding-bottom: 2.5px;
}
.g1{
  display: flex;
  margin-bottom: 5px;
}
#u-n{
  display: flex;
  justify-content: center;
  align-items: center;
  margin-left: 25px;
  color:rgb(25, 18, 18);
  font-size: 20px;
  font-style: italic ;
  font-weight: bold;
}
.yes{
  margin-top: 10px;
  margin-bottom: 10px;
  border: 1px solid rgb(1, 2, 20);
  background-color: white;
  border-radius: 10px;
  padding-left: 10px;
  margin-left: 15%;
  margin-right: 15%;
  padding-bottom: 10px;
}
.d-flex{
  background-color: black !important;
}
.zz{
  margin:10px;
}
      
    </style> 


{% for blog in blogs %}
  
  {% if key == blog.m_name %}
  <!-- <h1 class="title">{{ blog.title }}</h1> -->

    <div>
        <img src="{{ blog.landscape }}" alt="{{ blog.title }}" style="width:100%; height: auto;" class="landscape">
    </div>
<div class="upper">
   <div class="h">
       <h1 class="h">
           {{blog.m_name}}
       </h1>
   </div>
   <div class="about-movie ">

   <div class="r r1">
          <div class="rate h">
            <h2 class="temp">Rating</h2>
          </div>
          <div class="stars2">
          
          {% for i in rating_range %}
            <span class=" star1">&#9733;</span>
          {% endfor %}
          </div>
    </div>
    <div class="r">
      <div class="rate h ">
        <h2 class="temp">Genre</h2>
      </div>
    
        <div class="genre1">
            {{blog.genre}}
        </div>
    </div>
    <div class="r">
      <div class="rate h">
        <h2 class="temp">Release Year</h2>
      </div>
    
        <div class="genre1">
            {{blog.release_year}}
        </div>
    </div>
</div>
</div>
<div class="lower">
  <div class="comment">
    <div class="h">
       Rate It
    </div>
    <div class="get-rating">
    <form  class="get-rating" method = 'post'action="{% url 'comments' %}" id="myForm">
        {% csrf_token %}
        <!-- <h1>Sno {{blog.sno}}</h1> -->
        <div class="stars get-rating">
            <input class="star star-10 " value="10" id="star-10" type="radio" name="star" required><label class="star star-10" for="star-10"></label>
            <input class="star star-9" value="9" id="star-9" type="radio" name="star" required><label class="star star-9" for="star-9"></label>
            <input class="star star-8" value="8" id="star-8" type="radio" name="star" required><label class="star star-8" for="star-8"></label>
            <input class="star star-7" value="7" id="star-7" type="radio" name="star" required><label class="star star-7" for="star-7"></label>
            <input class="star star-6" value="6" id="star-6" type="radio" name="star" required><label class="star star-6" for="star-6"></label>
            <input class="star star-5" value="5" id="star-5" type="radio" name="star" required><label class="star star-5" for="star-5"></label>
            <input class="star star-4" value="4" id="star-4" type="radio" name="star" required><label class="star star-4" for="star-4"></label>
            <input class="star star-3" value="3" id="star-3" type="radio" name="star" required><label class="star star-3" for="star-3"></label>
            <input class="star star-2" value="2" id="star-2" type="radio" name="star" required><label class="star star-2" for="star-2"></label>
            <input class="star star-1" value="1" id="star-1" type="radio" name="star" required><label class="star star-1" for="star-1"></label>
            <!-- <input type="hidden" name='ron' id ='ron' value="{{blog}}"> -->
          </div>
        </div>
        <input type="hidden" name='con' id ='con' value="{{blog}}">
        <div class="form-outline">
          <textarea class="form-control" id="c" rows="3"  placeholder="Add a Comment" name="c"></textarea>
        </div>
        <div class="d-flex justify-content-between mt-3">
          <button class="btn btn-primary zz" type="reset">Reset</button>
          <button class="btn btn-primary zz "  id="submit-button" type="submit">Submit</button>
        </div>
      </form>
</div>
    <div class="show1">
      <div class="rate h">
        <h2 class="temp">Comment Section</h2>
      </div>
        {% for comment in u %}
        <!-- Displaying the comments -->
         <div class="rows">
          
         {% if comment.m_name == blog.m_name  %}
             <div class="yes">
             <div class="g1">
               <span class="avatar ">{{ comment.u_name|slice:"0:1" }}</span>
               <div id="u-n">{{ comment.u_name }}</div>
               
             </div>
             
             <div class="starsz">
              {% for _ in comment.rating|starsz %}
                <span class="star1">&#9733;</span>
              {% endfor %}
            </div>
              
          <br>
            {{comment.review}}
        {% endif %}
      </div>
      </div>
        
    {% endfor %}
    </div>
</div> 

  {% endif %}
{% endfor %}

<script>
    var isUserAuthenticated = "{{ user.is_authenticated }}";
    document.getElementById("submit-button").addEventListener("click", function() {
      if (isUserAuthenticated === "False") {
          alert("Please log in to submit a comment.");
        }
      else{
         alert("Comment posted  successfully")
      }

    });
    window.addEventListener('onreload', function () {
            // Get the form element
            var form = document.getElementById('myForm');

            // Reset the form
            form.reset();
        });
    // document.getElementById("submit-button").addEventListener("click", function() {
    //     document.getElementById("myForm").reset(); // Reset the form
    // });
    // function clearing(){
    //   document.getElementById("myForm").reset();
    // }
    // window.onload = function() {
    //   console.log("Page loaded");
    //     // document.getElementById("myForm").reset(); // Reset the form on page load
    //     clearing();
    // };
</script>



{% endblock %}